esphome:
  name: esp32-poe2
  comment: Olimex ESP32-POE2 (WROVER-E N4R8) with UEXT support

esp32:
  board: esp32dev
  framework:
    type: arduino
  psram:
    mode: quad
    speed: 80MHz

logger:

# ================= NETWORKING =================

# ---- WiFi (Primary) ----
wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  ap:
    ssid: "ESP32-POE2 Fallback"
    password: "fallback123"

captive_portal:

# ---- Ethernet (Secondary / Backup) ----
ethernet:
  type: LAN8720
  mdc_pin: GPIO23
  mdio_pin: GPIO18
  clk_mode: GPIO0_IN
  phy_addr: 0
  power_pin: GPIO12

# ================= ONBOARD IO =================

# ---- User Button (BUT1) ----
binary_sensor:
  - platform: gpio
    name: "BUT1 Button"
    pin:
      number: GPIO34
      mode: INPUT

# ---- External Power Sense ----
sensor:
  - platform: adc
    pin: GPIO39
    name: "External Power Sense"
    attenuation: 11db
    update_interval: 10s

# ================= UEXT CONNECTOR =================

# ---- UART1 on UEXT ----
uart:
  - id: uext_uart
    tx_pin: GPIO4
    rx_pin: GPIO36
    baud_rate: 115200

# ---- I2C Bus on UEXT ----
i2c:
  - id: uext_i2c
    scl: GPIO33
    sda: GPIO13
    scan: true

# ---- SPI Bus on UEXT (shared with SD card pins) ----
# NOTE: Cannot be used together with SD card
spi:
  - id: uext_spi
    clk_pin: GPIO14
    mosi_pin: GPIO2
    miso_pin: GPIO15

# ================= OPTIONAL SD CARD (DISABLED) =================
# Uses same pins as UEXT SPI
# To enable SD, REMOVE the SPI section above first.
#
# spi:
#   clk_pin: GPIO14
#   mosi_pin: GPIO15
#   miso_pin: GPIO2

# ================= CORE SERVICES =================
ota:
api:

